<?xml version="1.0" encoding="utf-8" ?>
<forms:ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:maps="clr-namespace:Xamarin.Forms.GoogleMaps;assembly=Xamarin.Forms.GoogleMaps"
             xmlns:bindings="clr-namespace:Xamarin.Forms.GoogleMaps.Bindings;assembly=Xamarin.Forms.GoogleMaps.Bindings"
             xmlns:viewModels="clr-namespace:IPCViewer.Forms.ViewModels"
             xmlns:forms="clr-namespace:Xamarin.Forms;assembly=Xamarin.Forms.Core"
             x:Class="IPCViewer.Forms.Views.MapsPage"
             Title="Map">

    <forms:ContentPage.BindingContext>
        <viewModels:MapViewModel />
    </forms:ContentPage.BindingContext>

    <forms:StackLayout
        Margin="10,20">

        <forms:Grid>
            <forms:Grid.ColumnDefinitions>
                <forms:ColumnDefinition Width="Auto" />
                <forms:ColumnDefinition Width="*" />
                <forms:ColumnDefinition Width="*" />
            </forms:Grid.ColumnDefinitions>

            <forms:Grid.RowDefinitions>
                <forms:RowDefinition Height="20" />
                <forms:RowDefinition Height="20" />
                <forms:RowDefinition Height="20" />
                <forms:RowDefinition Height="20" />
                <forms:RowDefinition Height="20" />
            </forms:Grid.RowDefinitions>

            <Image
                HeightRequest="100"
                forms:Grid.Column="0"
                forms:Grid.Row="0"
                forms:Grid.RowSpan="4"
                Source="{Binding ImageUrl}" />

            <forms:StackLayout forms:Grid.Column="1" forms:Grid.Row="0" Orientation="Horizontal">
                <Label Text="Name:" />
                <Label Text="{Binding Pin.Label}" />
            </forms:StackLayout>

            <forms:StackLayout forms:Grid.Column="1" forms:Grid.Row="1" Orientation="Horizontal">
                <Label Text="Latitude:" />
                <Label Text="{Binding Pin.Position.Latitude}" />
            </forms:StackLayout>

            <forms:StackLayout forms:Grid.Column="1" forms:Grid.Row="2" Orientation="Horizontal">
                <Label Text="Longitude:" />
                <Label Text="{Binding Pin.Position.Longitude}" />
            </forms:StackLayout>
        </forms:Grid>

        <forms:StackLayout
            VerticalOptions="FillAndExpand">
            <maps:Map>

                <maps:Map.Behaviors>
                    <bindings:BindingPinsBehavior Value="{Binding Pins}" />
                    <bindings:UpdateRegionBehavior Region="{Binding Region}" />
                    <bindings:SelectedPinChangedToCommandBehavior Command="{Binding SelectedPinChangedCommand}" />
                </maps:Map.Behaviors>
            </maps:Map>
        </forms:StackLayout>
    </forms:StackLayout>
</forms:ContentPage>